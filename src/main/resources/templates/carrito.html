<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Carrito | Óptica Visión Clara</title>
    <!-- Bootstrap 5.3 -->
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous"
    />
    <!-- Bootstrap Icons -->
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />

    <!-- SweetAlert2 CSS -->
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/sweetalert2@11.12.0/dist/sweetalert2.min.css"
    />

    <!-- CSS -->
    <link rel="stylesheet" th:href="@{/css/layout.css}" />
    <style>
        .small-muted {
            font-size: 0.9rem;
            color: #6c757d;
        }

        .toast-container {
            position: fixed;
            top: 1rem;
            right: 1rem;
        }
    </style>
</head>
<body>
<header th:replace="~{header :: header}"></header>

<main class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="mb-0">Tu Carrito</h1>
        <div>
            <button id="btnVaciar" class="btn btn-outline-danger btn-sm">
                Vaciar carrito
            </button>
        </div>
    </div>

    <!-- Tabla de productos -->
    <div class="table-responsive mb-4">
        <table class="table align-middle">
            <thead class="table-light">
            <tr>
                <th>Producto</th>
                <th style="width: 120px">Cantidad</th>
                <th>Precio Unitario</th>
                <th>Subtotal</th>
                <th></th>
            </tr>
            </thead>
            <tbody id="tbodyCarrito">
            <!-- Productos dinámicos -->
            </tbody>
        </table>
    </div>

    <div class="row g-4">
        <div class="col-md-6">
            <h4>Métodos de pago</h4>
            <div class="card mb-3">
                <div class="card-body">
                    <div class="form-check mb-2">
                        <input
                                class="form-check-input"
                                type="radio"
                                name="pago"
                                id="pagoTarjeta"
                                checked
                        />
                        <label class="form-check-label" for="pagoTarjeta"
                        >Tarjeta de crédito/débito</label
                        >
                    </div>
                    <div id="formTarjeta" class="mt-3">
                        <h6>Ingrese los datos de su tarjeta:</h6>
                        <form id="tarjetaForm" class="row g-2" onsubmit="return false;">
                            <div class="col-12">
                                <input
                                        id="cardNumber"
                                        type="text"
                                        class="form-control"
                                        placeholder="Número de tarjeta (16 dígitos)"
                                        required
                                        inputmode="numeric"
                                        maxlength="19"
                                />
                            </div>
                            <div class="col-6">
                                <input
                                        id="cardExpiry"
                                        type="text"
                                        class="form-control"
                                        placeholder="MM/AA"
                                        required
                                        maxlength="5"
                                />
                            </div>
                            <div class="col-6">
                                <input
                                        id="cardCVV"
                                        type="text"
                                        class="form-control"
                                        placeholder="CVV"
                                        required
                                        inputmode="numeric"
                                        maxlength="4"
                                />
                            </div>
                            <div class="col-12">
                                <input
                                        id="cardName"
                                        type="text"
                                        class="form-control"
                                        placeholder="Nombre del titular"
                                        required
                                />
                            </div>
                        </form>
                    </div>

                    <div class="form-check mt-3">
                        <input
                                class="form-check-input"
                                type="radio"
                                name="pago"
                                id="pagoYape"
                        />
                        <label class="form-check-label" for="pagoYape"
                        >Yape (Escanea el QR)</label
                        >
                    </div>
                    <div id="qrYape" class="mt-3 d-none text-center">
                        <img
                                src="qr-yape.png"
                                alt="QR de Yape"
                                class="img-fluid rounded"
                                style="max-width: 200px"
                        />
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 text-md-end">
            <h4>Total: <span id="total">S/ 0.00</span></h4>
            <button id="btnFinalizar" class="btn btn-primary btn-lg mt-3">
                Realizar Compra
            </button>
        </div>
    </div>
</main>

<footer th:replace="~{footer :: footer}" ></footer>

<div class="toast-container end-0 pt-5 p-3">
    <!-- Toast de Éxito -->
    <div
            class="toast align-items-center text-white bg-success border-0"
            role="alert"
            aria-live="assertive"
            aria-atomic="true"
            id="liveToastSuccess"
    >
        <div class="d-flex">
            <div class="toast-body"></div>
            <button
                    type="button"
                    class="btn-close btn-close-white me-2 m-auto"
                    data-bs-dismiss="toast"
                    aria-label="Cerrar"
            ></button>
        </div>
    </div>
</div>

<!-- JS Bootstrap y jQuery -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        xintegrity="sha384-YvpcrYf0tY3lHB60NNWqj4sM7K2Jz5t5X0MABfLw4T0tU5bH+F5J3G4WpWzK5I9Kj1G0/p"
        crossorigin="anonymous"
></script>

<!-- SweetAlert2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.12.0/dist/sweetalert2.all.min.js"></script>

<!---JS Normal--->
<script th:src="@{/js/carrito.js}"></script>
<script th:src="@{/js/badge.js}"></script>
</body>
</html>
